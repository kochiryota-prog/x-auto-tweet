name: X Auto Tweet
on:
  schedule:
    # 1日複数回実行（3時間おきなど、必要に応じて調整）
    # UTC時間での設定になります。日本時間(JST)は+9時間です。
    # 例: 00:00 UTC -> 09:00 JST
    - cron: "0 0,3,6,9,12,15,18,21 * * *"
  workflow_dispatch: # 手動実行ボタンを有効化
jobs:
  tweet:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
      - name: Run tweet bot
        env:
          X_API_KEY: ${{ secrets.X_API_KEY }}
          X_API_SECRET: ${{ secrets.X_API_SECRET }}
          X_ACCESS_TOKEN: ${{ secrets.X_ACCESS_TOKEN }}
          X_ACCESS_SECRET: ${{ secrets.X_ACCESS_SECRET }}
          # もしBeaer Tokenが必要なら追加:
          # X_BEARER_TOKEN: ${{ secrets.X_BEARER_TOKEN }}
        run: |
          # ディレクトリ移動は不要（ルートにファイルがあるため）
          python auto_tweet.py
